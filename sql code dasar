CREATE DATABASE dbpraUAS2371020088;
USE dbpraUAS2371020088

CREATE TABLE ANGGOTA
(ID_ANGGOTA VARCHAR(4) NOT NULL,
NAMA VARCHAR (30),
TGL_LAHIR DATE,
GENDER VARCHAR (15),
KOTA VARCHAR (30),
PRIMARY KEY (ID_ANGGOTA));

CREATE TABLE BUKU
(KODE_BUKU VARCHAR(4) NOT NULL,
JUDUL VARCHAR (30),
PENGARANG VARCHAR (20),
PENERBIT VARCHAR (20),
TAHUN_TERBIT VARCHAR (4),
PRIMARY KEY (KODE_BUKU));

CREATE TABLE PINJAM
(NO_PINJAM VARCHAR(4) NOT NULL,
KODE_BUKU VARCHAR (30),
ID_ANGGOTA VARCHAR (20),
TGL_PINJAM DATE,
TGL_KEMBALI DATE,
FOREIGN KEY (KODE_BUKU) REFERENCES BUKU(KODE_BUKU),
FOREIGN KEY (ID_ANGGOTA) REFERENCES ANGGOTA(ID_ANGGOTA));

ALTER TABLE ANGGOTA
ADD JENIS_KELAMIN VARCHAR (5) AFTER TGL_LAHIR;

ALTER TABLE buku
MODIFY COLUMN tahun_terbit year;

ALTER TABLE ANGGOTA
ADD NO_TELP INT AFTER TGL_LAHIR;

ALTER TABLE buku
ADD KELUAR INT;

ALTER TABLE PINJAM
ADD PRIMARY KEY (NO_PINJAM);

ALTER TABLE ANGGOTA
RENAME COLUMN JENIS_KELAMIN TO GENDER;

ALTER TABLE BUKU
RENAME COLUMN PENGARANG TO PENULIS;

ALTER TABLE BUKU
DROP COLUMN KELUAR;

ALTER TABLE ANGGOTA
DROP COLUMN NO_TELP;


#DML
INSERT INTO ANGGOTA (ID_ANGGOTA, NAMA, TGL_LAHIR, GENDER, KOTA)
VALUES('A003', 'Alfan Cahyo', '1998-10-13', 'Lk', 'Malang')

INSERT INTO buku (kode_buku, judul, penulis, penerbit, tahun_terbit)
VALUES('BK012', 'Hacking Wireless Network', 'Suryatama Udin', 'Jasakom', '2012')

INSERT INTO pinjam (no_pinjam, kode_buku, id_anggota ,TGL_PINJAM, TGL_KEMBALI) 
VALUES ('P17062404','BK012', 'A003', '2022-06-24', '2022-06-30')


UPDATE ANGGOTA
SET NAMA = 'HUSNUN AFIFAH', TGL_LAHIR = '2002-02-02', KOTA = 'MALANG'
WHERE ID_ANGGOTA = 'A002';

UPDATE BUKU
SET JUDUL = 'BASIS DATA', PENERBIT = 'TIGA SERANGKAI', TAHUN_TERBIT = '2012'
WHERE KODE_BUKU = 'BK012';

UPDATE pinjam
SET TGL_PINJAM = '2022-06-26', KODE_BUKU = 'BK007'
WHERE NO_PINJAM = 'P17062404';

SELECT * FROM anggota
where gender = 'LK' and kota = 'malang'; 

SELECT judul, penulis, penerbit FROM buku
WHERE TAHUN_TERBIT > '2009';

SELECT NAMA, ID_ANGGOTA, GENDER FROM anggota
WHERE KOTA = 'MALANG' AND TGL_LAHIR < '2000-01-01';


SELECT * FROM anggota INNER JOIN buku INNER JOIN pinjam 
ON pinjam.NO_PINJAM = anggota.ID_ANGGOTA = buku.KODE_BUKU
WHERE BUKU.PENERBIT = 'ELEX MEDIA' AND anggota.KOTA = 'MALANG';

DELETE FROM ANGGOTA
WHERE YEAR (TGL_LAHIR) bETWEEN 1990 AND 2000;

DELETE FROM bUKU
WHERE pENERBIT = 'Elex Media'
AND PENULIS LIKE '%D';

DELETE FROM PINJAM
WHERE tanggal_kembali > '30'
AND kode_buku != 'BK009';

 

SELECT * FROM anggota

